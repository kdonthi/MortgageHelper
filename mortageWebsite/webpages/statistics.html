<!DOCTYPE html>
<html>
    <head>
        <title>Statistics about Landis Customers</title>
    </head>
    <body>
        <div id="barChart" style="width:50%; margin:0 auto";>

        </div>
        <script src="https://code.jscharting.com/2.9.0/jscharting.js"></script>
        <script src="index.js"></script>
        <script>

            let baseUrl = "http://localhost:3000";

            async function getMortgageStatusCounts() {
                return await fetch(baseUrl + "/mortgageStatus/count");
            }

            getMortgageStatusCounts()
                .then(res => res.json())
                .then(mortgageScores =>
                    JSC.Chart("barChart", {
                        type: "vertical column",
                        series: [{
                            points: [
                                {x: "Mortgage Ready", y: mortgageScores.good},
                                {x: "Needs a bit of work", y: mortgageScores.okay},
                                {x: "Needs a lot more work", y: mortgageScores.bad}
                            ]
                        }]
                    })
                );
        </script>

    </body>
</html>